version: '3'

services:
  google_pathways_api:
    restart: "no"
    command: ["./wait-for-it.sh", "db:5432", "--", "bash", "tests/run_tests.sh"]
  # migrations:
  #   image: brighthive/google_pathways_api:latest
  #   depends_on:
  #     - postgres_service
  #     - google_pathways_api
  #   command: "bash migrations.sh"
  # postgres_service:
  #   image: postgres:12
  #   environment:
  #     - POSTGRES_USER=brighthive_user
  #     - POSTGRES_PASSWORD=password
  #     - POSTGRES_DB=google_pathways_api
  #   ports:
  #     - "5433:5432"